<?php
/* This file encoded by Raizlabs PHP Obfuscator http://www.raizlabs.com/software */
error_reporting(E_ALL ^ E_NOTICE);ini_set('error_reporting', E_ALL ^ E_NOTICE);  include_once(_PS_MODULE_DIR_.'/smsprestashop/Utils.php'); include_once(_PS_MODULE_DIR_.'/smsprestashop/lang.php');     class SendSms extends AdminTab    {       public $R36B48AEC7AE2C66B8E3D92ED219CF642='';  public $R6A1F2355CD7BCD4ADAFCF1DAC386AB9A='';  public $R038785A7E49EAB658206B11C884FE2B3='';      public $R3F243E13444F693A59F15AA5D424B3BE= "";  public $R43D82A865B2A7A7E682BE7E19E4333E8= 0;  public $R7458AFFA82B1F3BE50F6252ECAE56317= '';  public $RA5FC016971E180B38B91409CA4E12788= '';  public $R0E7A0A631E791AAA5749A81D5E612CC9=0;  public $R1538EF403BCC90126519C663397C17B3=9;  public $RC0C7002B9446E2EB68976D18D0DC76B5=0;  public $R14D76A65DDAF58771C5836F1D8E569DF="";  public $R103CF00832E880829B75973C429F5DE1;  public $R128FC304DD9F881FF1DD97CC2AD6B18A="";  public $R7354764F9A04FC2D2E769462FBA24FB9;    public function display()     {   global $currentIndex, $cookie, $employee;    if(!strlen($currentIndex)>0):    $currentIndex = Utils::get_currentIndex();  endif;     if(!$this->user5):   $RC65770D951D3270DE716E007CA8D96AA = new Utils();   $RC65770D951D3270DE716E007CA8D96AA->loadSmsProfile();   $this->user5 =  $RC65770D951D3270DE716E007CA8D96AA->user5;   $this->passwd5 =  $RC65770D951D3270DE716E007CA8D96AA->passwd5;   $this->simulate5 =  $RC65770D951D3270DE716E007CA8D96AA->simulate5;  endif;        if($this->user5 && $this->passwd5):   if(count($this->pole123)==0) $this->pole123 = $this->GetSmsInfo2();      $R8862AC4E3B4EB76DFEE46BCDCF504D60 = 0;    $R130D64A4AD653C91E0FD80DE8FEADC3A = "SELECT * FROM "._DB_PREFIX_."configuration where name='PS_TIMEZONE' order by name ";        $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->ExecuteS($R130D64A4AD653C91E0FD80DE8FEADC3A);         if (is_array($R679E9B9234E2062F809DBD3325D37FB6)):         foreach ($R679E9B9234E2062F809DBD3325D37FB6 AS $R4EEB713E57BBAAF1217CF39632604473)         {          $this->timezone=$R4EEB713E57BBAAF1217CF39632604473['value'];          }                 if( preg_match('/^[0-9]*$/', $this->timezone) ):                    $R6737E0D6733F4490DFD201EF86DE613C = "SELECT * FROM "._DB_PREFIX_."timezone where id_timezone='".$this->timezone."'";          $RBCAD8604F1365528276ACD3796428C41 = Db::getInstance()->ExecuteS($R6737E0D6733F4490DFD201EF86DE613C);          if (is_array($RBCAD8604F1365528276ACD3796428C41)):            foreach ($RBCAD8604F1365528276ACD3796428C41 AS $RAAE6940545D4C6B65E61108BE1B52933)            {             $this->timezone=$RAAE6940545D4C6B65E61108BE1B52933['name'];                }          endif;         endif;                          else:          $this->timezone='Europe/Prague';               endif;      $R5B08D4F823242B6E50E99FC8C099CDB9 = new DateTime($this->pole123[1], new DateTimeZone('Europe/Prague'));    date_default_timezone_set($this->timezone);    $R0E7A0A631E791AAA5749A81D5E612CC9 = date("Y-m-d H:i:s", $R5B08D4F823242B6E50E99FC8C099CDB9->format('U'));       if(@is_file(_PS_MODULE_DIR_.'/smsprestashop/calendarDateInput_'.lang_iso_code.'.js')):    $R0202F0CA30337C6D486AEA72EA9612DD = "   <script type=\"text/javascript\" src=\"../modules/smsprestashop/calendarDateInput_".lang_iso_code.".js\">   <!--Jason's Date Input Calendar- By Jason Moon http:    Script featured on and available at http:    Keep this notice intact for use.-->   </script>";     else:     $R0202F0CA30337C6D486AEA72EA9612DD = "   <script type=\"text/javascript\" src=\"../modules/smsprestashop/calendarDateInput_en.js\">   <!--Jason's Date Input Calendar- By Jason Moon http:    Script featured on and available at http:    Keep this notice intact for use.-->   </script>";     endif;      $R0202F0CA30337C6D486AEA72EA9612DD .= '<script type="text/javascript" src="../modules/smsprestashop/function_help1.js"></script>';      $R0202F0CA30337C6D486AEA72EA9612DD .= "<br /><fieldset>      <legend><img src=\"../img/t/AdminTools.gif\" alt=\"\" /> ".$this->l(v_sendsms_bulksms)."</legend><form name=\"formSMS\" action=\"". $currentIndex ."&submitSendSmsSendSMS=1&token=".$this->token."\" method=\"post\" enctype=\"multipart/form-data\">";    $RC81E66BA68118988F4A70CE32BE4222B = "";    if($this->unicode==1) $RC81E66BA68118988F4A70CE32BE4222B = " checked=\"checked\"";    $RE5139281EF30F3EA16A5CB0FCEC1202B = "";    if($this->sendlater==1) $RE5139281EF30F3EA16A5CB0FCEC1202B = " checked=\"checked\"";    if(!$this->datumodesl) $this->datumodesl = Date("Y-m-d",mktime(0,0,0,date("m"),date("d")+1,date("Y")));    $R0202F0CA30337C6D486AEA72EA9612DD .="<div>     <div style=\"float:left; width:429px;\">      <div style=\"padding-top:0px\">".v_sendsms_addrecipients."&nbsp;<span style=\"cursor:help;text-decoration:underline;\" title=\"".v_sendsms_addtext."\" onclick=\"popup_title(this)\">?</span>&nbsp;".v_sendsms_eg."<br /> <textarea name=\"recipients\" style=\"width:420px; height:45px;\">".$this->recipients."</textarea> <br /><br />     </div><br />      ".v_sendsms_entertext."<br /><textarea name=\"text\" style=\"width:420px; height:135px;\" onchange=\"countitSMS()\"  onkeyup=\"countitSMS()\" onmousemove=\"countitSMS()\">".$this->text."</textarea><label style=\"font-weight:normal;text-align:center;width:460px;\" id=\"labelSMS\"></label></div>      <div style=\"float:left; width:460px;padding-left:10px;padding-top:0px;\"> ".v_sendsms_addcsv."&nbsp;<span style=\"cursor:help;text-decoration:underline;\" title=\"".v_sendsms_csvtext."\" onclick=\"popup_title(this)\">?</span><br /> <input type=\"file\" name=\"sms_file\" /><br /><br /><br /><br /><br /><br />  <input type=\"checkbox\" onchange=\"countitSMS()\" id=\"unicode\" name=\"unicode\" value=\"1\"".$RC81E66BA68118988F4A70CE32BE4222B." />".v_sendsms_unicode."&nbsp;<span style=\"cursor:help;text-decoration:underline;\" title=\"".v_sendsms_unicodetext."\" onclick=\"popup_title(this)\">?</span><br /><br /><br />     <input type=\"checkbox\" id=\"sendlater\" name=\"sendlater\" value=\"1\"".$RE5139281EF30F3EA16A5CB0FCEC1202B." />".v_sendsms_sendlater."&nbsp;&nbsp;".v_sendsms_date."<script>DateInput('datumodesl', true, 'YYYY-MM-DD','".$this->datumodesl."')</script>";      if(!$this->hodina) $this->hodina = 9;     for($RA16D2280393CE6A2A5428A4A8D09E354=0;$RA16D2280393CE6A2A5428A4A8D09E354<24;$RA16D2280393CE6A2A5428A4A8D09E354++)     {     $R2B21173C5AE06F24F33345313E4AEA22 = $RA16D2280393CE6A2A5428A4A8D09E354;     if($RA16D2280393CE6A2A5428A4A8D09E354<10) $R2B21173C5AE06F24F33345313E4AEA22 = "0".$RA16D2280393CE6A2A5428A4A8D09E354;     if($this->hodina==$R2B21173C5AE06F24F33345313E4AEA22) $R0C9FB48C15CC7995931D5E50006C9080 = "selected";     $R38721624E2B3CE6BC65CD6FE3CA77F36 .= "<option value=\"".$R2B21173C5AE06F24F33345313E4AEA22."\"".$R0C9FB48C15CC7995931D5E50006C9080.">".$R2B21173C5AE06F24F33345313E4AEA22."</option>\n";     $R0C9FB48C15CC7995931D5E50006C9080="";     }     $R8029A0ACEB72E0D9A46C65DC5DCDE30E = v_sendsms_time2."<select name=\"hodina\" style=\"font-size:10px;\">".$R38721624E2B3CE6BC65CD6FE3CA77F36."</select>";               for($R3CB9CDAED257453CFA56B9EF81B44C57=0;$R3CB9CDAED257453CFA56B9EF81B44C57<60;$R3CB9CDAED257453CFA56B9EF81B44C57++)     {     $R216B8AF75F5E8911B7861CBD4BACB59D = $R3CB9CDAED257453CFA56B9EF81B44C57;     if($R3CB9CDAED257453CFA56B9EF81B44C57<10) $R216B8AF75F5E8911B7861CBD4BACB59D = "0".$R3CB9CDAED257453CFA56B9EF81B44C57;     if($this->minuta==$R216B8AF75F5E8911B7861CBD4BACB59D) $R0C9FB48C15CC7995931D5E50006C9080 = "selected";     $R762570F5982E3458E06966E2A335F3BB .= "<option value=\"".$R216B8AF75F5E8911B7861CBD4BACB59D."\"".$R0C9FB48C15CC7995931D5E50006C9080.">".$R216B8AF75F5E8911B7861CBD4BACB59D."</option>\n";     $R0C9FB48C15CC7995931D5E50006C9080="";     }     $R62F27AF2019CCEEC809B69CD8662BE4B = "<select name=\"minuta\" style=\"font-size:10px;\">".$R762570F5982E3458E06966E2A335F3BB."</select>";         $R0202F0CA30337C6D486AEA72EA9612DD .= " ".$R8029A0ACEB72E0D9A46C65DC5DCDE30E.":".$R62F27AF2019CCEEC809B69CD8662BE4B;      $R449AFAE74EF62B34B4C4C766EC56F1A3 = ""; $RFDBA85D152FC23065A46C69E66423369 = ""; $RFAE2C418F0D056B8C6DD31537B978A4D = "";    if($this->datereal==-1) $R449AFAE74EF62B34B4C4C766EC56F1A3=" selected=\"selected\"";    elseif($this->datereal==1) $RFAE2C418F0D056B8C6DD31537B978A4D=" selected=\"selected\"";    else $RFDBA85D152FC23065A46C69E66423369=" selected=\"selected\"";     $R0202F0CA30337C6D486AEA72EA9612DD .="<br /><div style=\"padding-top:10px\">".v_sendsms_time."<select name=\"datereal\" style=\"font-size:10px;width:139px;\">     <option value=\"-1\"".$R449AFAE74EF62B34B4C4C766EC56F1A3.">".$R0E7A0A631E791AAA5749A81D5E612CC9." +".v_sendsms_hr."</option>\n     <option value=\"0\"".$RFDBA85D152FC23065A46C69E66423369.">".$R0E7A0A631E791AAA5749A81D5E612CC9."</option>\n     <option value=\"1\"".$RFAE2C418F0D056B8C6DD31537B978A4D.">".$R0E7A0A631E791AAA5749A81D5E612CC9." -".v_sendsms_hr."</option>\n     </select> (".v_sendsms_timezone."<span style=\"cursor:help;\" title=\"".v_sendsms_timezone2."\"><a href=\"". $currentIndex ."&submitSmsZone=1&token=".$this->token."\" onclick=\"window.open(this.href);return false;\" style=\"text-decoration: underline;\">".$this->timezone."</a></span>)</div><br /><br />     <input type=\"hidden\" name=\"timezone\" value=\"".$this->timezone."\" />         <div style=\"float:right;\"><input type=\"submit\" value=\"".$this->l(v_sendsms_send)."\" name=\"submitSendSmsSendSMS\" class=\"button\" /></div>     </div>     </div><div class=\"clear\"></div><br />";         $R0202F0CA30337C6D486AEA72EA9612DD .="<script language=\"javascript\">\nfunction countitSMS() {";   $R0202F0CA30337C6D486AEA72EA9612DD .=" if(document.formSMS.unicode.checked) {  var mnt = [0,1,2,3,4,5];  var mnl = [0,  1,68,135,202,269,];  var mnh = [1,68,135,202,269];  var zaklad;  var text1;  var len;  zaklad = 268;  var unicode = 1; } else {  var  mnt = [0,1,2,3,4,5];  var mnl = [0,  1,154,307,460,613,];  var mnh = [1,154,307,460,613];  var zaklad;  var text1;  var len;  zaklad = 612;  var unicode = 0; }  ";   $R0202F0CA30337C6D486AEA72EA9612DD .=" text1 = document.formSMS.text.value; len = text1.length; var chartext = '".v_sendsms_jschars."'; var total = 0;  for (i=0;i<6;i++)    {     if ( len >= mnl[i] && len < mnh[i] )     {     total = mnt[i];     i=100;     }    }  if(unicode==1 && total==2 && len<=70) total=1; else if(unicode==0 && total==2 && len<=160) total=1;  document.getElementById('labelSMS').innerHTML = ''+chartext+len+', SMS: '+total+'';   if(document.formSMS.text.value.length>zaklad) { alert(\"".v_sendsms_longtext."\"); document.formSMS.text.value=document.formSMS.text.value.substring(0,zaklad); }  }  countitSMS();    </script>\n ";                   $R2D5DC4ED8BFF2F10FF4FA87917B082CA .= '       <h2>'.$this->l(v_sendsms_sendsms).'</h2><p>'.v_sendsms_sendtext.'</p>';                 echo $R2D5DC4ED8BFF2F10FF4FA87917B082CA.$R0202F0CA30337C6D486AEA72EA9612DD.$R959F718EA91F21FE834F95B1D71C4BEB;                     else:     echo '      <h2>'.$this->l(v_sendsms_smsnotactive).'</h2>    <div>'.v_sendsms_usernotactive.'</div>';   endif;        }         public function postProcess()  {             if (Tools::isSubmit('submitSmsZone') )   {         Tools::redirectAdmin("index.php?tab=AdminLocalization&token=".Utils::getAdminTokenLite1('AdminLocalization'));   }       elseif (Tools::isSubmit('submitSendSmsSendSMS') )   {          $this->odesl = htmlentities( Tools::getValue( 'odesl' ), ENT_COMPAT, 'UTF-8' );      $this->unicode = htmlentities( Tools::getValue( 'unicode' ), ENT_COMPAT, 'UTF-8' );    $this->sendlater = htmlentities( Tools::getValue( 'sendlater' ), ENT_COMPAT, 'UTF-8' );    $this->datumodesl = htmlentities( Tools::getValue( 'datumodesl' ), ENT_COMPAT, 'UTF-8' );    $this->text = htmlentities( Tools::getValue( 'text' ), ENT_COMPAT, 'UTF-8' );     $this->datereal = htmlentities( Tools::getValue( 'datereal' ), ENT_COMPAT, 'UTF-8' );    $this->hodina = htmlentities( Tools::getValue( 'hodina' ), ENT_COMPAT, 'UTF-8' );    $this->minuta = htmlentities( Tools::getValue( 'minuta' ), ENT_COMPAT, 'UTF-8' );      $R7458AFFA82B1F3BE50F6252ECAE56317 = htmlentities( Tools::getValue( 'timezone' ), ENT_COMPAT, 'UTF-8' );    $this->recipients = htmlentities( Tools::getValue( 'recipients' ), ENT_COMPAT, 'UTF-8' );         if (!strlen($this->text)>0):      $this->_errors[] = Tools::displayError(v_sendsms_fillsms);      return false;     elseif (mb_strlen( html_entity_decode($this->text, ENT_QUOTES, 'UTF-8'),"utf-8")>612 && $this->unicode==0):          $this->_errors[] = Tools::displayError(v_sendsms_smslong);      return false;    elseif (mb_strlen( html_entity_decode($this->text, ENT_QUOTES, 'UTF-8'),"utf-8")>268 && $this->unicode==1):      $this->_errors[] = Tools::displayError(v_sendsms_unicodesmslong);      return false;     endif;            $R322FB89B8AA1AB0BF05D20AF4DF16244 = "";  $RACA2A34C2B9E40C574D9B4212A41B310 = "";     if ($this->sendlater==1):      $R88E58C48A0263F9D9FA7CAEF0FA27073 = explode("-",$this->datumodesl);      $R759C64E74E54EDEF6A4A51FE61FC9680 =  Date("U");       $RDEA7969B183484A8941F49B2C298C42F =  Date("Y-m-d H:i:s",mktime( ($this->hodina ) ,$this->minuta,0,$R88E58C48A0263F9D9FA7CAEF0FA27073[1],$R88E58C48A0263F9D9FA7CAEF0FA27073[2],$R88E58C48A0263F9D9FA7CAEF0FA27073[0]));      $RA7A7C00EC434912CD09AF0F506043EBA =  Date("U",mktime( ($this->hodina + $this->datereal) ,$this->minuta,0,$R88E58C48A0263F9D9FA7CAEF0FA27073[1],$R88E58C48A0263F9D9FA7CAEF0FA27073[2],$R88E58C48A0263F9D9FA7CAEF0FA27073[0]));        if($RA7A7C00EC434912CD09AF0F506043EBA <= $R759C64E74E54EDEF6A4A51FE61FC9680):      $this->_errors[] = Tools::displayError(v_sendsms_wrongtime);       return false;     endif;          $R7E85F41AECED3065AD78DF8C780C7A98 = date("Y-m-d H:i:s", $RA7A7C00EC434912CD09AF0F506043EBA);     $R5B08D4F823242B6E50E99FC8C099CDB9 = new DateTime($R7E85F41AECED3065AD78DF8C780C7A98, new DateTimeZone($R7458AFFA82B1F3BE50F6252ECAE56317));     $R769D373058414266BF471E9D9CFA5FFF = 'Europe/Prague';     date_default_timezone_set($R769D373058414266BF471E9D9CFA5FFF);     $RA7A7C00EC434912CD09AF0F506043EBA = $R5B08D4F823242B6E50E99FC8C099CDB9->format('U');     $R322FB89B8AA1AB0BF05D20AF4DF16244 = "&datelater=".$RA7A7C00EC434912CD09AF0F506043EBA;     $RACA2A34C2B9E40C574D9B4212A41B310 = $RDEA7969B183484A8941F49B2C298C42F;         endif;     $RD0044F86937134A690C2209E2888DC60 = null; $R49F5D139D3C8C4B7C66540DC05811FC0 = 0;    if(strlen($this->recipients)>1):     $RD0044F86937134A690C2209E2888DC60 = explode(",",$this->recipients);     $R49F5D139D3C8C4B7C66540DC05811FC0 = 1;    endif;      if(strlen($_FILES['sms_file']['tmp_name'])>0):      $R556C7EF36FDD8FA37749CAF13CCCFA2F='';     @$R556C7EF36FDD8FA37749CAF13CCCFA2F = file_get_contents($_FILES['sms_file']['tmp_name']);          if(strlen($R556C7EF36FDD8FA37749CAF13CCCFA2F)>0):      if($R49F5D139D3C8C4B7C66540DC05811FC0==1): $RD0044F86937134A690C2209E2888DC60= array_merge ($RD0044F86937134A690C2209E2888DC60,  explode("\n",$R556C7EF36FDD8FA37749CAF13CCCFA2F));      else: $RD0044F86937134A690C2209E2888DC60= explode("\n",$R556C7EF36FDD8FA37749CAF13CCCFA2F);      endif;     else:       @$R6B6E98CDE8B33087A33E4D3A497BD86B=FOpen($_FILES['sms_file']['tmp_name'],"r");      while (@$R556C7EF36FDD8FA37749CAF13CCCFA2F=FGets($R6B6E98CDE8B33087A33E4D3A497BD86B,5000)):       $REC7B84C4C618CF804C74A2965D2750D3=explode(";",$R556C7EF36FDD8FA37749CAF13CCCFA2F);       $RD0044F86937134A690C2209E2888DC60[]= $REC7B84C4C618CF804C74A2965D2750D3[0];      endwhile;     endif;     endif;       $R3822482F43586AAFA43346606F9E1CA2 =  count($RD0044F86937134A690C2209E2888DC60);      if ($R3822482F43586AAFA43346606F9E1CA2==0):      $this->_errors[] = Tools::displayError(v_sendsms_norecipients);      return false;     endif;       $R97C3D125F721D164AE6E0EA71ABAA3F1 = new Utils();    $R97C3D125F721D164AE6E0EA71ABAA3F1->loadSmsProfile();    $this->user5 =  $R97C3D125F721D164AE6E0EA71ABAA3F1->user5;    $this->passwd5 =  $R97C3D125F721D164AE6E0EA71ABAA3F1->passwd5;    $this->simulate5 =  $R97C3D125F721D164AE6E0EA71ABAA3F1->simulate5;    $this->pole123 = $this->GetSmsInfo2();    $RE902658B46E9F0EF43A42CDF9BCFE232 = $this->pole123[0];     $R31F00A797C0FA5EEA4508B2457FFFD24 = html_entity_decode($this->text, ENT_QUOTES, 'UTF-8');    $RDE90B56F5E6A24E136297EABD5385B1E = Utils::CountSms($R31F00A797C0FA5EEA4508B2457FFFD24, $this->unicode);     if($this->simulate5==0 && ($R3822482F43586AAFA43346606F9E1CA2*$RDE90B56F5E6A24E136297EABD5385B1E*0.75)> $RE902658B46E9F0EF43A42CDF9BCFE232 ):      $this->_errors[] = Tools::displayError(v_sendsms_lowcreditall.$R3822482F43586AAFA43346606F9E1CA2.v_sendsms_recipients);      return false;    endif;      while(list($R5BAB45B2132D2183387808D5476661EB, $R9F664A82D66DA5E2A567819C91FC4B35) = @each($RD0044F86937134A690C2209E2888DC60))       {         $R103CF00832E880829B75973C429F5DE1 = null;        $R103CF00832E880829B75973C429F5DE1 = Utils::preparenumber2($R9F664A82D66DA5E2A567819C91FC4B35);        if($R103CF00832E880829B75973C429F5DE1):         $R0703AF0C4AE0879B68E3CE4BF5157360["number"][] = $R103CF00832E880829B75973C429F5DE1["mobile"];         $R0703AF0C4AE0879B68E3CE4BF5157360["isms"][] = $R103CF00832E880829B75973C429F5DE1['isms'];         $R0703AF0C4AE0879B68E3CE4BF5157360["sendertype"][] = $R103CF00832E880829B75973C429F5DE1['sendertype'];         $R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][] = $R103CF00832E880829B75973C429F5DE1['senderID'];        endif;      }         $RBD53AD6C21F49801119BB04556883E55 = $R0703AF0C4AE0879B68E3CE4BF5157360;       $R7318A606A3118D468DAE7078098FBA7B = "action=sendsmsall&username=".$this->user5."&password=".$this->passwd5."&unicode=".$this->unicode."&data=".$R31F00A797C0FA5EEA4508B2457FFFD24."&number=".@implode(";",$R0703AF0C4AE0879B68E3CE4BF5157360["number"])."&isms=".@implode(";",$R0703AF0C4AE0879B68E3CE4BF5157360["isms"])."&sender=".@implode(";",$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"]).$R322FB89B8AA1AB0BF05D20AF4DF16244;              $R602BAA072843820A45861C75C510C77E = new Utils();        if($this->simulate5==1):        $this->connserver = 29; $R602BAA072843820A45861C75C510C77E->server_data = "";       else:        $this->connserver = $R602BAA072843820A45861C75C510C77E->server_post($R7318A606A3118D468DAE7078098FBA7B);       endif;        if($this->connserver==1):             $RA30E67F43092199CB84A6793C98D4DD9 =  $R602BAA072843820A45861C75C510C77E->server_data;                              $R31F00A797C0FA5EEA4508B2457FFFD24 = addslashes($R31F00A797C0FA5EEA4508B2457FFFD24);        $R17C57548BA70F185620C173FB2081EBD=0;        $R3554AE3B96B8989A0DFF940CB1E0FDE8 = explode("QQQ___QQQ",$RA30E67F43092199CB84A6793C98D4DD9);        while(list($RC79A5177291710EBFC9B9B18F7A1623B, $RA36B6C18E5D225E1D44C529F842402FA) = @each($R3554AE3B96B8989A0DFF940CB1E0FDE8))         {          $R28E922677E6469110F0C79765F0AB169 = "";                  if(preg_match("/<b>(.*)<\/b><u>(.*)<\/u>/i", $RA36B6C18E5D225E1D44C529F842402FA, $RDEEC0F795D5FCE6004C92C18C7CCF615)):            $R2E07B6A6D52ABA71031B61094E2A4B99 = $RDEEC0F795D5FCE6004C92C18C7CCF615[1];           $R355EF3FA24DCC8BBCFEC5305FE99574B = $RDEEC0F795D5FCE6004C92C18C7CCF615[2];          endif;           if($R2E07B6A6D52ABA71031B61094E2A4B99==1 || $R2E07B6A6D52ABA71031B61094E2A4B99==11):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);            $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','1','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);           $R17C57548BA70F185620C173FB2081EBD=1;           $R1CDFE816663711E4AF125EBC8D07676C = v_sendsms_smssent;          elseif($R2E07B6A6D52ABA71031B61094E2A4B99==111):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = "SMS will be send later - ".$RACA2A34C2B9E40C574D9B4212A41B310;           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','4','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','$R28E922677E6469110F0C79765F0AB169','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);           $R17C57548BA70F185620C173FB2081EBD=1;           $R1CDFE816663711E4AF125EBC8D07676C = v_sendsms_smssaved;          elseif($R2E07B6A6D52ABA71031B61094E2A4B99==3 && $R355EF3FA24DCC8BBCFEC5305FE99574B==9):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = v_sendsms_wrongnumber;           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);                    elseif($R2E07B6A6D52ABA71031B61094E2A4B99==3 && $R355EF3FA24DCC8BBCFEC5305FE99574B==15):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = v_sendsms_unauthorized;           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);           elseif($R2E07B6A6D52ABA71031B61094E2A4B99==3 && $R355EF3FA24DCC8BBCFEC5305FE99574B==10):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = "low credit for sending sms";           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);           elseif($R2E07B6A6D52ABA71031B61094E2A4B99==3 && $R355EF3FA24DCC8BBCFEC5305FE99574B==22):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = v_sendsms_nounicode;           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);                 elseif($R2E07B6A6D52ABA71031B61094E2A4B99==3):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = $R355EF3FA24DCC8BBCFEC5305FE99574B;           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);           elseif($R2E07B6A6D52ABA71031B61094E2A4B99==4):           $R8DB795D302DE5AA755803C08C783F781 = null;            $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);           $R28E922677E6469110F0C79765F0AB169 = v_sendsms_loginerror;           $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R0703AF0C4AE0879B68E3CE4BF5157360["number"][$RC79A5177291710EBFC9B9B18F7A1623B]."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,'".$R0703AF0C4AE0879B68E3CE4BF5157360["customerID"][$RC79A5177291710EBFC9B9B18F7A1623B]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["recipient"][$RC79A5177291710EBFC9B9B18F7A1623B]."',''  ) ";           $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);           endif;          }           elseif($this->connserver==2):            $R28E922677E6469110F0C79765F0AB169 = v_sendsms_cantconnect;          $this->_errors[] = Tools::displayError($R28E922677E6469110F0C79765F0AB169);          return false;        elseif($this->connserver==29):            $R31F00A797C0FA5EEA4508B2457FFFD24 = addslashes($R31F00A797C0FA5EEA4508B2457FFFD24);        while(list($R9E0C7F4CC2E81247219753AD29588EC2, $R7AC898B623377DE38F531B2CEE620319) = @each($RBD53AD6C21F49801119BB04556883E55["number"]))         {           $R8DB795D302DE5AA755803C08C783F781 = null;           $R8DB795D302DE5AA755803C08C783F781 = explode("__",$R355EF3FA24DCC8BBCFEC5305FE99574B);          $R28E922677E6469110F0C79765F0AB169 = v_sendsms_simulation;                    $RBD858F8FE70FFF55D195F3A5A98BB4C6 = "insert into "._DB_PREFIX_."sp_sms_history values (null,'+".$R7AC898B623377DE38F531B2CEE620319."',NOW(),'".$R31F00A797C0FA5EEA4508B2457FFFD24."','2','".$R8DB795D302DE5AA755803C08C783F781[1]."','".$R8DB795D302DE5AA755803C08C783F781[2]."','".$R0703AF0C4AE0879B68E3CE4BF5157360["senderID"][$R9E0C7F4CC2E81247219753AD29588EC2]."','".$this->unicode."','4','".$R8DB795D302DE5AA755803C08C783F781[0]."','".$R28E922677E6469110F0C79765F0AB169."','".$RDE90B56F5E6A24E136297EABD5385B1E."',0,0,'',''  ) ";          $R679E9B9234E2062F809DBD3325D37FB6 = Db::getInstance()->Execute($RBD858F8FE70FFF55D195F3A5A98BB4C6);        }          $R17C57548BA70F185620C173FB2081EBD=1;          $R1CDFE816663711E4AF125EBC8D07676C = v_sendsms_simulationconfirm;       endif;         if($R17C57548BA70F185620C173FB2081EBD==1):        echo $this->displayConfirmation($R1CDFE816663711E4AF125EBC8D07676C);                unset($this->odesl);                unset($this->unicode);        unset($this->sendlater);        unset($this->datumodesl);        unset($this->text);          unset($this->datereal);        unset($this->hodina);        unset($this->minuta);         unset($this->recipients);        else:        $this->_errors[] = Tools::displayError($R28E922677E6469110F0C79765F0AB169);       endif;         }             return parent::postProcess();  }      public function GetSmsInfo2()  {   global $RA30E67F43092199CB84A6793C98D4DD9;   $RCC5354D80D37F8D6155B0C5ECE76CFA8 = null;      $R7318A606A3118D468DAE7078098FBA7B = "action=info2&username=".$this->user5."&password=".$this->passwd5;           $R602BAA072843820A45861C75C510C77E = new Utils();     $this->connserver = $R602BAA072843820A45861C75C510C77E->server_post($R7318A606A3118D468DAE7078098FBA7B);     if($this->connserver==1):       $RA30E67F43092199CB84A6793C98D4DD9 =  $R602BAA072843820A45861C75C510C77E->server_data;       if(preg_match("/<b>(.*)<\/b><u>(.*)<\/u>/i", $RA30E67F43092199CB84A6793C98D4DD9, $RDEEC0F795D5FCE6004C92C18C7CCF615)):         $R2E07B6A6D52ABA71031B61094E2A4B99 = $RDEEC0F795D5FCE6004C92C18C7CCF615[1];        $R355EF3FA24DCC8BBCFEC5305FE99574B = $RDEEC0F795D5FCE6004C92C18C7CCF615[2];       endif;            if($R2E07B6A6D52ABA71031B61094E2A4B99==1):       $RCC5354D80D37F8D6155B0C5ECE76CFA8 = explode(";",$R355EF3FA24DCC8BBCFEC5305FE99574B);      elseif($R2E07B6A6D52ABA71031B61094E2A4B99==3):       $this->_errors[] = Tools::displayError(v_sendsms_error);        return false;      elseif($R2E07B6A6D52ABA71031B61094E2A4B99==4):       $this->_errors[] = Tools::displayError(v_sendsms_loginerror);        return false;      endif;      elseif($this->connserver==2):       $this->_errors[] = Tools::displayError(v_sendsms_cantconnect);      return false;     endif;    return $RCC5354D80D37F8D6155B0C5ECE76CFA8;   }            public function displayConfirmation($R8409EAA6EC0CE2EA307354B2E150F8C2)  {    $RE96E6957E643B99AB982605A4618E1D3 = '   <div class="module_confirmation conf confirm">    <img src="'._PS_IMG_.'admin/ok.gif" alt="" title="" /> '.$R8409EAA6EC0CE2EA307354B2E150F8C2.'   </div>';   return $RE96E6957E643B99AB982605A4618E1D3;  }         } ?>